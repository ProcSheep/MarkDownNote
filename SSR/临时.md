# 临时
- 在react笔记05hooks中, 临时学习了ssr的基础知识,对理解ssr渲染和后续的next nuxt框架很有帮助,临时复制到这里以防止后面忘了
## 补充服务器端知识(另起笔记)
- ==服务端进阶路线: node服务器->Vue/React服务器端渲染API->nuxt/next==
### SSR优势与SPA缺点
- ==什么是SPA?==
  - 现在学习的vue和react都是单页面应用,单页面应用就是,只有一个html页面,切换页面不是跳转到新的html,而是替换html页面内部的组件,所以页面加载速度更快
- ==SPA: 单页面富应用的两个缺点==
  - 首屏渲染速度慢
  - SEO优化不好
- ==浏览器渲染页面大致流程==
  - 渲染页面,向服务器请求一个文件index.html,然后解析渲染（包括文件内引入js和css文件）
  - 实际上在SPA页面应用中,index.html里面基本没东西,大概是`div id=app`和一点meta配置
- ==解释SPA缺点的原因==
  - ==SEO搜索引擎优化差==
    - 搜索引擎,比如百度,在爬虫爬取数据时,主要是爬取index.html文件,但是这个文件内很空,只能爬取一点标题或是meta配置,而接下来渲染的数据(包括未下载的js文件),是不在爬取范围的,爬取结果收录到百度数据库,当用户搜索关键字时,百度在数据库关键字中寻找数据,但是你的网站爬取过程中提供的数据很少,所以优先级很低,可能在10页以后,导致网页流量很少,用户根本搜不到你的网站,所以SPA页面的SEO优化很差
  - ==首屏渲染页面慢==
    - ==早期SSR网页(例如JSP)== ,在服务器中早就把首页渲染好了,直接可以向服务器请求一个完整的网页index.html,爬虫在爬取网站时,可以爬取更多数据,有利于SEO优化;同时请求的是一整个网站的代码,可以直接解析所有的页面内容; 但是SPA的首页index.html本身没有多少内容,需要通过引入的大量js文件,向服务器请求后续的网页加载所需的js文件,才能显示完整的网页,在这个过程中经过'下载文件->浏览器执行文件代码'才会显示网页,这个过程耗费很多时间
  > 但是大部分项目不需要考虑上面的缺点,比如公司内部使用的后台管理系统,只是公司内使用而已,不需要SEO优化,而且速度慢一点也无所谓,而且现代浏览器执行js代码的速度很快,另外,有些浏览器爬取数据是很良心的,比如谷歌会在SPA页面爬取你的后续js代码,收录更多信息进入SEO数据库(当然百度没有这么做) 
- ==补充概念: SSR和CSR==
  - ==SSR（Server Side Rendering，服务端渲染）==，指的是页
  面在服务器端已经生成了完成的HTML页面结构，不需要浏
  览器通过执行js代码创建页面结构,只需要浏览器解析即可,这也是早期的前端
  - ==对应的是CSR（Client Side Rendering，客户端渲染）==
  我们开发的==SPA页面==通常依赖的就是客户端渲染,这就是现代的前端，CSR即前端浏览器会请求index.html,然后加载过程中会加载对应的css和js,css和js就是被打包好的脚本代码，需要额外请求并解析，在这之后页面才能正常渲染和使用
- ==现阶段的前端服务器渲染==
  - 早期的服务端渲染(SSR)包括PHP、JSP、ASP等方式，但是在目前前
  后端分离的开发模式下，前端开发人员不太可能再去学习PHP、JSP等技术来开发网页
  - 不过我们可以借助于==Node==来帮助我们执行JavaScript代码，提前完成页面的渲染,==这样补全了SPA页面的劣势==,当然单纯的Node无法完成ssr渲染,需要ssr api或是框架
  - 之后进一步学习服务端方面的知识: Node学习 => Vue/React 关于SSR的API =>  nuxt/next框架(封装) ,==只学习api没有用,不能做api工程师,要刨析原理,现代的SPA页面借助上面ssr api或框架可以补全SPA页面的缺陷==
- 知识点补充图
  [![pEjbqgS.png](https://s21.ax1x.com/2025/05/15/pEjbqgS.png)](https://imgse.com/i/pEjbqgS)

### SSR同构与Hydration
- ==什么是同构?== 一套代码既可以在服务端运行也可以在客户端运行,这就是同构应用; 
  - 服务器端运行指的是Node服务器运行代码(依靠vue或react提供的ssr api),生成HTML页面结构
  - 浏览器运行,生成HTML页面结构
- ==为什么生成同一套HTML页面结构需要Node和浏览器两次去执行?==
   - Node生成的HTML页面结构只是单纯的字符串,但是它无法处理js代码,此阶段单单只是为了展示,但是交互的逻辑无法实现; 而浏览器再次生成HTML页面结构时会把对应的js逻辑代码注入到页面中,使得页面具有逻辑交互的功能,==此阶段称为hydrate==
  > 总结下来,用户发出请求后,Node服务端先通过SSR渲染出首页的内容,然后客户端在注入页面的所有js逻辑等
- ==什么是Hydration？这里我引入vite-plugin-ssr插件的官方解释==
  - 在进行SSR 时，我们的页面会呈现为HTML,但仅HTML 不足以使页面具有交互性。例如，浏览器端JavaScript 为零的页面不能是交互式的（没有JavaScript 事件处理程序来响应用户操作，例如单击按钮）。
  - 为了使我们的页面具有交互性，除了在Node.js 中将页面呈现为HTML 之外，我们的UI 框架（Vue/React/...）还在浏览器中加载和呈现页面,为页面添加js相关的交互逻辑,==这个过程称hydration(注入)==
- 补充理解知识的图片
  [![pEjbLjg.png](https://s21.ax1x.com/2025/05/15/pEjbLjg.png)](https://imgse.com/i/pEjbLjg)
  [![pEjbb38.png](https://s21.ax1x.com/2025/05/15/pEjbb38.png)](https://imgse.com/i/pEjbb38)
