# Git
- 练习git的学习网站: https://learngitbranching.js.org/
## 特性和工作流程
- ==**Git: 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目,国内的gitee和国外的github都是基于git的代码托管平台,使用git可以把本地的代码存储到他们的服务器中托管,实现共享和备份**==
- Git 的特性
  - 1.直接记录快照，而非差异比较; ==直接把此版本的代码全部保存,如果有的文件没有修改,保留一个地址链接指向此文件==
  - 2.近乎所有操作都是本地执行, ==断网后依旧可以本地提交,联网后同步服务器==
  - 3.每一个存储此代码库的主机都是一份备份,服务器损坏后可以通过任意一台主机恢复数据
- Git 的区域
  - 分为三个区域: ==工作区、暂存区、Git 仓库==
  - 工作区: 处理工作的区域
  - 暂存区: 已完成的工作的临时存放区域，等待被提交
  - Git仓库: 最终的存放区域
- Git 的三种状态
  - 已修改modified: 表示修改了文件，但还没将修改的结果放到暂存区
  - 已暂存staged:表示对已修改文件的当前,版本做了标记，使之包含,在下次提交的列表中
  - 已提交committed:表示文件已经安全地保存,在本地的Git 仓库中
- 基本的Git 工作流程如下：
  - ① 在工作区中修改文件
  - ② 将你想要下次提交的更改进行暂存
  - ③ 提交更新，找到暂存区的文件，将快照永久性,存储到Git 仓库
## Git基础
- ==1.git终端和windows终端的许多命令相同==
  `ctrl+^`: 再现刚刚打过的一些命令
  `clear`: 清空指令台
  `exit`: 关闭
  终端不可以`ctrl+c`复制,但是右键可以自动黏贴复制的内容
  >
- ==2.git的配置信息和操作手册==
- `git config --list --global`: 查看git全局配置信息,带有`--global`字样的指令都是全局配置设置,而且永不改变; 另外查看全局配置文件还可以在`C:/Users/用户名文件夹/.gitconfig`查看
- `git XXX --help`: 浏览器打开git命令帮助手册(==全英文==)
- `git XXX -h`: 终端打开简化版的帮助手册
- ==XXX为任意的git命令,比如想要查阅git指令里的add指令,把add写入XXX位置即可查询对应指令的使用手册==
> 
- ==3.获取Git仓库的方法==
  - 1.将尚未进行版本控制的本地目录转化为Git仓库
  - 2.从其他服务器克隆已经存在的Git仓库,比如从gitee,github克隆别人的项目
> 
- ==4.本地中初始化仓库==
  - 1.在项目根目录打开git bash
  - 2.执行git init初始化,然后项目文件夹中会有.git的文件,里面包含了初始的必要文件,==如果删除此文件,本地的git仓库随之销毁==
> 
- ==5.工作区文件中的4中状态: **其中未跟踪文件处于git管理之外,除非主动提交否则不受git管理**==
  [![pE9ajUO.jpg](https://s21.ax1x.com/2025/01/06/pE9ajUO.jpg)](https://imgse.com/i/pE9ajUO)
- ==5.1查看文件处于什么状态==
  - `git status`: 查看文件内所有文件的状态,当库中所有文件均已提交git库且处于未修改状态,即为git的最理想状态,此时无法查询到任何文件的状态,即没有文件需要提交,==中文不能正常显示已经配置==
  - `git status --s`: 简单显示状态
  - `git add`: 添加要跟踪文件,例如`git add 文件名`,==此时此文件将被添加到暂存区==
  [![pE9aLb6.png](https://s21.ax1x.com/2025/01/06/pE9aLb6.png)](https://imgse.com/i/pE9aLb6)

- ==提交更新==
  - 在==暂存区==有文件需要提交,在此文件的git终端中执行`git commit -m "可以输入此次提交的注释信息"`命令,提交后则备份进入git库中
>
- ==6.对提交的文件进行更改==
  - 当一个文件已被git跟踪(==可以检测到文件的变化==),而且已经提交到git库内部了,如果此时修改此文件,文件的状态即由'未修改'-->'已修改modified'(==意为已修改但是未提交,即本地工作区的内容与git库内容出现不一致),**此时文件还没被放入暂存区**,终端查看此文件状态为红色的modified==
>
- ==7.暂存已修改的文件==
  - 对于已修改,被跟踪的M文件,要提交到暂存区A,需要再执行`git add 文件名`指令,执行完成后,==终端查看此文件状态为绿色的modified==
  
> ==vscode | git终端 --- 简写 --- 详细== 
> ---------- git库之外 ----------
> 未跟踪: U ---- ??(红) ----- untracked files (红)
> ---------- git库之内 ----------
> (对提交的或者暂存的文件进行修改) 
> 已修改: M --- M(红) --- Modified(红)
> 
> 已暂存: A --- M(绿) --- Modified(绿)
> ==提交后则不再显示文件==

- ==8.提交已暂存文件==
  - 对于刚刚修改过的文件,已经通过`git add XXX`添加到了暂存区,继续执行`add commit XXX -m "提交的注释信息"`,把暂存区的文件提交到git库,==添加文件遵循相对路径语法(./ ../等),最后跟要提交的文件,==它可以是单个文件,也可以是一个文件夹(内部所有的文件都会提交)==
- ==8.2一次添加多个文件进入暂存区==
  - `git add .`,这是一个常用的指令,会把新建文件和修改文件一起加入到暂存区
- ==8.3取消暂存==
  - `git reset HEAD 文件名`,把已经暂存的文件移除,变为红色M(还是被git跟踪的)
  - ==移除多个文件的暂存==,同理`git reset HEAD .`,把文件中所有已经在暂存区的文件全部移除
> 
- ==9.撤销对文件的修改==
  把文件还原为git库中所保存的版本,如果你对文件进行修改后不满意,想要撤销所有的修改,可以执行`git checkout -- 文件名`,==注意此操作是git库版本内容覆盖工作区内容,你的修改操作永久丢失,因为工作区的修改操作文件并没有被保存到git库中,被覆盖就没有了==
>
- ==10.跳过暂存区==
  - 常规流程: 工作区->暂存区->git仓库; ==优化 工作区->git仓库==
  - 命令 `git commit -a -m "XXX"`,添加`-a`跳过`git add`
>
- ==11.移除文件==
  - 把工作区和git仓库同时移除 `git rm -f index.js`
  - 只移除git库 `git rm --cached index.js`
  - ==对应的状态显示为**D(delete),在下次提交时会被删除**,并不再被git跟踪==
>
- ==12.忽略文件.gitignore==
  - 既不想加入git也不想被标记未跟踪U,在目录下创建`.gitignore`配置文件,使用vscode编辑文件内容,==注意:已经被忽略的文件必须是未被提交的文件,如果之前已经提交到git库中了,那么就一定会被跟踪,需要先把它从git库中删除,`git rm --cached XXX`,然后再提交测试,这样才会取消跟踪,**所以这个操作最好是在提交前进行规避追踪**,配置好gitignore文件后,进行`git add .`保存到暂存区即可生效,提交后也生效==
  - ==规范语法==
    - #开头是注释
    - /结尾为目录
    - /开头防止递归(防止向上一级目录递归)
    - !开头取反
    - 可以以==glob模式进行文件夹匹配==,glob模式就是正则表达式
  - ==glob模式==
    - * 0个或多个任意字符
    - ? 一个任意字符
    - [abc] 匹配任意一个列在[]中的字符 (匹配a或b或c的文件名)
    - [a-z] [0-9] 意为 a到z 0到9
    - ** 匹配任意中间目录 test/**/test1,中间夹多少中间目录都可以,只要两头匹配即可
- ==案例示范:==
  [![pE9aXVK.png](https://s21.ax1x.com/2025/01/06/pE9aXVK.png)](https://imgse.com/i/pE9aXVK)
  > 也可以直接写一个文件名,指定忽略此文件夹内的某个文件,==比如node_modules这个文件绝对不要提交上传,别人根据pakeage.json文件里面的信息可以下载,不需要你提交到远程库==
- ==13.查看提交历史==
  - `git log`: 按时间先后顺序显示所有提交历史记录,最新的在最上面
  - `git log -2`: 同上,但是只显示最近2条,数字随意些
  - `git log -2 --pretty=oneline`: 同上,但是信息只能写在一行里
  - `git log -2 --pretty=format:"%h | %an | %ar | %s"`: 在一行里展示自定义的信息格式, %h代表提交简写hash值,%an%ar为作者和提交时间日期,%s为提交注释
  - ==显示的信息==: commit的唯一标识id,用户和邮箱,提交时间以及提交的注释-m
- ==14.回退到指定版本==
  - 推荐`git log --pretty=oneline`:显示更加清晰,方便寻找版本的`<commitID>`
  - `git reset --hard <commitID>`: 指定版本回退提交id的历史版本
  - 如果切换到旧版本,如果还想显示完整的版本历史记录,执行`git reflog --pretty=oneline`,然后根据查询的id再次更新到别的id版本
- ==小结,重点==
  - 初始化git库: `git init`
  - 查看文件的状态: `git status` or `git status -s`
  - 一次性将多个文件加入暂存区: `git add .`
  - 将暂存区的文件提交到git仓库: `git commit -m "提交消息"`
# Github
- ==**1.本地git库上传到github仓库**==
- 创建github远程仓库和本地git库管理后,==有两种访问方式,HTTP和SSH==,**负责链接本地库git和云端服务器库github**
  - HTTP: 零配置,但是访问仓库需要账号和密码
  - ==SSH==: 需要配置,配置后不需要重复输入账号和密码
  > http太麻烦了,直接学习ssh
- ==SSH key==
  - 作用: 实现本地仓库和github之间免登录的非对称加密数据传输
  - 组成: id_rsa(私钥,本地电脑) id_rsa.pub(公钥,github)
- ==生成SSH key==
  - 打开 git bush
  - `ssh-keygen -t rsa -C "你的github邮箱"`
  - `ssh-keygen -t rsa -C "3132519428@qq.com"`
  - 连续敲击3次回车,即可在`C:\Users\用户名\.ssh`生成两个文件id_rsa(私钥存自己电脑里),id_rsa.pub(公钥给github托管服务器)
  > ==注意: 公钥与私钥是成对,通过这种方式github服务器可以不通过输入密码来确定这是你的电脑,但是相对的,如果你换了别的电脑,比如公司的电脑,这个电脑是没有对应的私钥的,所以如果想要使用ssh,需要额外再生成一对公钥私钥,然后在github上配置一次,一个电脑对应一个私钥,公钥全部存在GitHub中即可== 
- ==Github远程库ssh配置==
  - 记事本打开 id_rsa.pub,复制内容
  - 设置settings里面的 SSH and GPG keys,创建一个新的ssh key
  - 起个名字title,并把复制的内容粘贴进去
- ==检验github的ssh是否配置成功==
  - ==由于某些原因,github的22端口不可用,改为443端口(配置config文件),现已经可以成功链接github远程仓库了==
  - `ssh -T git@github.com`
- ==提交本地git仓库代码到远程服务器github==
  - 完成本地git仓库的一次提交commit `git commit -m "123123"`
  - 创建一个新的空github库,相关操作也会给你提示代码,选择ssh,按顺序输入以下代码
    `git remote add origin url` 链接远程仓库origin(名字)到url(地址,giuhub会给你)
    `git branch -M main` 新版本github的库名字不再为master,改为main
    `git push -u origin main` 第一次提交代码到远程库所需要输入的指令
  - `git push`: 之后如果要更新github端的代码的指令,==本地更新git库后,更新远程仓库github中的代码==
  - 执行命令 `git remote set-url <仓库名> <新的URL地址>`，其中 <仓库名> 通常是 “origin”，但也可以是其他名称；<新的URL地址> 是需要修改的新的远程仓库地址。
- ==关于远程仓库origin==
  - 在本地创建的每一个git库,链接远程库都需要起一个远程库的名字,可以通过`git remote -v`来查看此git库中的远程库链接名字,设置远程库时不可以重名,不过不同的git库之间远程库名字不冲突,只有同一个git库中设置2个相同的远程库名字时才会冲突,所以一般默认为origin,如果你的一个git库既要托管github又要托管gitee等多个代码平台,配置远程库名字时要区分,当然你也可以复制出2份相同的文件夹,分别创建各自的git库,这样就不会冲突了,删除远程库的指令可以自己查
- ==**2.克隆github仓库到本地**==
  - `git clone url`: 克隆别人的项目,url是别人仓库的地址,建议SSH地址
  - 直接使用vscode自带的快捷方式克隆项目: 比如新建一个窗口,然后选择左侧源代码管理,选择克隆一个仓库到本地,因为vscode克隆默认是http模式,所以设置过ssh后,需要到对应的github中把ssh的连接复制过来,然后黏贴到搜索栏进行远程仓库获取(ssh模式)
- ==**3.tag标签**==
- ==1.tag作用==
  - 用于标识版本号,给某些重要的提交节点上标签,可以回退,识别或下载这些节点的文件
- ==2.常用的代码指令(注意正常创建好本地和远程github后再添加tag)==
  - 1.==提交后commit,对此次提交添加tag标签== 
    - `git tag v1.0.0` 添加版本号(内容自拟)
    - `git tag -a v1.1.0 -m "我是注释"`
  - 2.查看所有的tag `git tag`
  - 3.查看设置tag的具体信息(时间,作者等) `git show v1.0.0`
  - 4.==把tag放到远端Github仓库里面==
    - 提交单个: `git push origin v1.0.0` 库名一般为origin
    - 提交全部: `git push origin --tags`
  - 5.==删除某个tag==
    - 本地删除: `git tag -d v1.0.0`
    - 远程删除: `git push origin -d v1.1.0`
  - 6.==回退到某个tag版本==
    - `git checkout v1.0.0`,==回退后要修改内容最好创建新的分支修改,不要影响到main分支里的源代码==
- ==**4.分支**==
- ==1.什么是分支?==
  - 多人协作开发时,为了防止互相干扰,每个开发者基于分支进行项目开发,最后把分支合并,一个项目就完成了
- ==2.main主分支==
  - ==现在叫main主分支(以前叫master): main主分支只有一个,用于保存和记录整个项目已经完成的功能和代码==,因此不允许程序员直接在master分支上修改代码,要在对应的分支上修改,然后合并到主分支main中
- ==3.功能分支==
  - ==功能分支即用来开发新功能的分支==,临时从主分支分叉出来,当新功能完成开发后,可以合并到主分支上
- ==4.查看分支列表==
  - `git branch`: 查看当前git库中的所有分支,==分支名字前的`*`代表当前所处的分支==
  - `git branch --merged` 查看所有合并到当前分支的分支
  - `git branch --no-merged` 查看所有的没有合并到当前分支的分支
- ==5.创建新分支==
  - `git branch 分支名字`: ==**基于当前分支**创建一个新的分支==,比如你在main分支,此时创建新的分支login,那么新的分支是基于main分支创建的,此分支拥有此时main的所有代码,==注意此时用户所处的分支还是在main上面,并没有因为新创建一个分支而转移到新的login分支上了==
- ==6.切换分支==
  - `git checkout 分支名字`: 切换到对应的分支上面开发功能
- ==7.快速创建并切换到新分支==
  - `git checkout -b 分支名字`: 创建一个新的分支并立即切换到新分支上面
- ==8.合并分支==
  - `git checkout main`: 首先切换到主分支main,==要合并到哪个分支,先转移到那个分支上面==
  - `git merge login`: 把基于main创建的login分支合并到main分支上
- ==9.删除分支==
  - `git branch -d 分支名称`: 如果分支功能彻底完成且后续不需要修改,那么合并分支后,手动删除分支,不要在要删除的分支上删除那个分支,即不要在login分支上删除login分支
  - 如果此分支没有合并到主分支,删除后就会永远丢失,如果也要删除把-d转为-D即可强制删除
- ==10.遇到冲突时的合并操作==
  - 在2个不同分支中,对一个文件同一个位置进行不同的修改,git无法干净合并它们,需要手动打开程序合并,打开程序,vscode会智能显示2个分支对于同一个文件的不同修改,可以选择保留一方,或全部保留,处理冲突后,继续执行`git add .` + `git commit -m "解决了分支冲突"`
  > ==注意：这里的冲突出现的核心原因是，两个分支（无论主次）在提交代码（commit）但未推送（push）的情况下，出现了相同内容的冲突，此时git才会让你修改，以避免将来push推送到远程库时，出现冲突，本质是在推送前解决冲突代码==
  ```
    冲突标记说明：
    <<<<<<< HEAD：冲突开始，后面是「当前所在分支」的代码
    =======：冲突分隔线，前后分别是两个分支的冲突内容
    >>>>>>> 分支名：冲突结束，后面是「要合并的分支」的代码
  ```
  - ==在vscode中提交一个项目到远程github的流程:== 
    - 实际工作开发四步曲（添，提，拉，推）:
    - 添：将修改的内容添加到本地暂存区 git add。
    - 提：将本地暂存区中的内容提交到本地代码库 git commit -m 'description'。
    - ==拉：同步==，拉取远程代码库中的内容，在多人协同开发中十分的重要，因为假如事先没有同步更新到最新版本有可能会覆盖别人修改的东西，假如拉取后有冲突直接使用VS Code解决冲突即可 git pull。
    - 推：将本地代码库中的内容推送到远程代码仓库 git push。
    > ==解决冲突的问题就是在拉取部分==,你在本地改了代码后不要直接强硬的推送到远程库中,如果本地和远程库有冲突可能会造成远程库被强行覆盖导致丢失代码,拉取的作用就是拉取远程的代码和你的本地代码进行比对,通过vscode解决代码片段的冲突,然后再推送
- ==11.将本地分支推送到远程仓库==
  - `git push -u 远程仓库别名 本地分支名称:远程分支名称`: ==只有第一次推送需要-u,之后上传分支的代码直接`git push`即可==; 如果不想要远程分支的名字,简写省略掉也可以,这样本地分支名字和远程分支名字一样了,例如: `git push -u origin login`,向origin远程仓库中推送分支login,且远程仓库分支命名也为login
- ==12.查看远程仓库的信息==
  - `git remote show 远程仓库的名字`: 查看远程仓库的信息,包含分支和对应的文件
- ==13.跟踪分支(下载远程分支内容)==
  - `git checkout 远程分支名字`: 下载远程分支内容到本地仓库,远程仓库别名保持与本地仓库名字一致
  - `git checkout -b 本地分支名称 远程仓库的名称/远程分支的名称`: 下载对应远程仓库的分支,同时修改名字
- ==14.拉取远程分支的最新代码==
  - `git pull`: 拉取远程仓库中最新的代码(远程的代码比本地的新)
- ==15.删除远程仓库中的分支==
  - `git push 远程仓库的名字 --delete 远程仓库分支名字`: 例如删除远程仓库origin的test分支 `git push origin --delete test`
- ==16.关于Head==
  - 每次创建的分支作为一个指针指向对应的提交,而Head则告诉git你现在在哪个分支里面,即Head指向你当前所处分支
- ==**补充-------------------------------------------------------**==
- 1.==工作中的分支合并==
  - 在工作中,随着开发会上线新的版本v1.0.0,然后继续开发,如果之前的版本需要修复bug,在之前的上线版本开分支(hotfix)修复即可(fix_01 fix_02);最后在当前开发的master中合并一下之前修理的bug即可,==注意在合并时处理文件之间的冲突,合并完后再提交远端即可,此时合并后的新master有两个parent,一个555一个fix_02==
  [![pEtV3C9.jpg](https://s21.ax1x.com/2025/03/07/pEtV3C9.jpg)](https://imgse.com/i/pEtV3C9)

<!-- # Gitee -->
# 常用命令(面试,待)
- 1.基础配置与初始化
  - 初始配置（首次使用必做）
    ```bash
      # 配置用户名和邮箱（关联远程仓库提交记录）
      git config --global user.name "Your Name"
      git config --global user.email "your@email.com"

      # 查看配置信息
      git config --list
    ```
  - 初始化仓库
    ```bash
      # 在现有项目中初始化 Git 仓库
      git init

      # 克隆远程仓库到本地
      # 例如：git clone https://github.com/username/repo.git
      git clone <远程仓库地址>  
    ```
- 2.团队协作
  - 关联与查看远程仓库
    ```bash
      git remote  # 查看远程仓库别名（默认通常是origin）
      git remote add origin <远程地址>  # 关联远程仓库
    ```
  - 拉取(pull)与推送(push)代码
    ```bash
      # 拉取远程分支最新代码（合并到当前分支，常用：git pull = git fetch + git merge）
      git pull origin <远程分支名>  # 例如：git pull origin main

      # 推送本地分支到远程（首次推送需指定关联关系）
      git push -u origin <本地分支名>  # -u 表示后续可直接用 git push
      git push origin <本地分支名>     # 非首次推送

    ```